{"version":3,"sources":["webpack:///webpack/bootstrap 07d0cd1519f4e7d69cfa","webpack:///./public/js/main.js","webpack:///./public/js/common.js","webpack:///./public/js/sprites/sprite.js","webpack:///./public/js/stage.js","webpack:///./public/js/resource.js","webpack:///./public/js/sprites/lovers.js","webpack:///./public/js/sprites/spriteTools.js","webpack:///./public/js/config/index.js","webpack:///./public/js/config/lovers.js","webpack:///./public/js/sprites/drool.js","webpack:///./public/js/sprites/endProgress.js","webpack:///./public/js/sprites/count.js","webpack:///./public/js/sprites/hand.js","webpack:///./public/js/sprites/fff.js","webpack:///./public/js/sprites/torch.js","webpack:///./public/js/actions/throwTorch.js","webpack:///./public/js/sprites/flyingTorch.js","webpack:///./public/js/sprites/landFire.js","webpack:///./public/js/startStage.js","webpack:///./public/js/sprites/fffStart.js","webpack:///./public/js/sprites/startTorch.js","webpack:///./public/js/loader.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,G;;;;;;AC5BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,G;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,uCAAsC,uDAAuD;AAC7F;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;;;;;;;ACvJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uCAAsC;;;;;;;AC7CtC;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,G;;;;;;ACrCA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACNA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA,6B;;;;;;ACzEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,8B;;;;;;AChBA;AACA;AACA,4DAA2D,uDAAuD;;AAElH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,E;;;;;;ACzBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,uB;;;;;;AChBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,sB;;;;;;ACfA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wB;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,G;;;;;;AC3DA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,kC;;;;;;AC7BA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA,uB;;;;;;ACjDA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,2B;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,wB;;;;;;AClBA;AACA;AACA;;AAEA;;AAEA;;AAEA,8BAA6B;;AAE7B;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA,G","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:7301/public/js/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 07d0cd1519f4e7d69cfa\n **/","/**\n * Created by zyg on 15/11/6.\n */\nvar common = require('./common');\nvar sprite = require('./sprites/sprite');\nvar renderer;\nvar r = common.isSupportWebGL();\nif(r){\n    renderer= new PIXI.WebGLRenderer(640, 1004, {\n          transparent:true\n      }\n    );\n}else{\n    renderer= new PIXI.CanvasRenderer(640, 1004, {\n          transparent:true\n      }\n    );\n}\n\ndocument.body.appendChild(renderer.view);\nvar audio = document.getElementById('audio')\naudio.loop = true\n\nvar stage = require('./stage');\nvar startStage = require('./startStage')\nvar mainStage = new PIXI.Container()\nvar ready = require('./loader');\n\nready(function (com) {\n    stage.gameOver = function() {\n        stage.clear()\n        startStage.init()\n        mainStage.addChild(startStage)\n        audio.pause()\n    }\n    startStage.start = function() {\n        startStage.clear()\n        stage.init()\n        mainStage.addChild(stage)\n        audio.play()\n    }\n    startStage.init()\n    mainStage.addChild(startStage)\n    render(mainStage);\n});\n\nvar render = function(stage){\n    function animate() {\n        if(stage.render) {\n            stage.render()\n        }\n        stage.children.forEach((function(child){\n            if(child.render){\n                child.render();\n            }\n        }));\n\n        // render the stage container\n        renderer.render(stage);\n\n        requestAnimationFrame(animate);\n    }\n    animate();\n};\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/10.\n */\nmodule.exports = {\n  isSupportWebGL: function () {\n    if (!!window.WebGLRenderingContext) {\n      var canvas = document.createElement(\"canvas\"),\n        names = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"],\n        context = false;\n\n      for (var i = 0; i < 4; i++) {\n        try {\n          context = canvas.getContext(names[i]);\n          if (context && typeof context.getParameter == \"function\") {\n            // else, return just true\n            return true;\n          }\n        } catch (e) {\n        }\n      }\n\n      // WebGL is supported, but disabled\n      return false;\n    }\n\n    // WebGL not supported\n    return false;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/common.js\n ** module id = 1\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\n\nvar setValue = function(obj,key,value){\n    if(key.length === 1){\n        var k0 = key[0];\n        if(typeof obj[k0] === 'function'){\n            obj[k0].apply(obj,[].concat(value));\n        }else{\n            obj[k0] = value;\n        }\n    }else{\n        setValue(obj[key.shift()],key,value);\n    }\n    return obj;\n};\n\nvar setConfig = function(object,config){\n    for(var k in config){\n        setValue(object, k.split('.'),config[k]);\n    }\n    return object;\n};\n\nmodule.exports = {\n    getMc:function(config){\n        var maxFrame = config.maxFrame;\n        var preFix = config.preFix;\n        var         frames = [];\n\n        delete config.maxFrame;\n        delete config.preFix;\n\n        for(var i=1;i<=maxFrame;i++){\n            frames.push(PIXI.Texture.fromFrame(preFix + i + '.png'))\n        }\n\n        var mc = new PIXI.extras.MovieClip(frames);\n        mc.maxFrame = config.maxFrame\n        return setConfig(mc,config);\n    },\n    getIm:function(config){\n        var img = config.img;\n\n        delete config.img;\n\n        var texture = PIXI.Texture.fromImage(img);\n        var sp = new PIXI.Sprite(texture);\n\n        return setConfig(sp,config);\n    }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/sprite.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprites/sprite');\nvar R = require('./resource')\nvar stage = new PIXI.Container();\nvar htmlTitle =document.querySelector('title');\n\nvar generateLovers = function(stage, x) {\n    var lovers = require('./sprites/lovers')(x)\n    lovers.play()\n    stage.loversArr.push(lovers)\n    stage.addChild(lovers);\n    //console.log('增加后：' + loversArr.length)\n}\n\nvar randomLovers = {\n    0: function(stage) {\n        generateLovers(stage, 0)\n    },\n    1: function(stage) {\n        generateLovers(stage, 1)\n    },\n    2: function(stage) {\n        generateLovers(stage, 2)\n    },\n    3: function(stage) {\n        generateLovers(stage, 0)\n        generateLovers(stage, 2)\n    },\n    4: function(stage) {\n        generateLovers(stage, 0)\n        generateLovers(stage, 1)\n    },\n    5: function(stage) {\n        generateLovers(stage, 1)\n        generateLovers(stage, 2)\n    },\n    6: function(stage) {\n        generateLovers(stage, 0)\n        generateLovers(stage, 1)\n        generateLovers(stage, 2)\n    }\n}\n\nstage.clear = function() {\n    stage.removeChildren()\n    stage.parent.removeChild(stage)\n    this.visible = false\n}\n\nfunction rate (count) {\n    if (count > 200 * 0.99) {\n        return 99 + '%'\n    } else {\n        return count / 200 * 100 + '%'\n    }\n}\n\nstage.showEndMask = function() {\n    stage.isEnd = true\n    stage.interactive = false\n    var mask = sprite.getIm({\n        img: R.endMask,\n        'position.set':[0,0],\n        'width':640,\n        'height':1004\n    });\n    var textStr = rate(stage.burnCount);\n    var text = new PIXI.Text(textStr,{font : '50px Arial', fill : 0x000000, align : 'center'});\n    text.x = 360\n    text.y = 340\n\n    var backButton = sprite.getIm({\n        img: R.backButton,\n        'anchor.set': [0.5, 0.5],\n        'position.set':[320,550]\n    });\n    backButton.interactive = true\n    backButton.on('touchstart', function(e) {\n        stage.gameOver()\n    })\n    stage.addChild(mask)\n    stage.addChild(backButton)\n    stage.addChild(text)\n}\n\nstage.init = function() {\n    stage.isEnd = false\n    stage.interactive = true\n    stage.loversArr = []\n    stage.timer = 0\n    stage.lg = 0 //lover group count\n    this.visible = true\n    this.burnCount = 0\n    this.progress = 0\n\n    var count = require('./sprites/count')()\n    var hand = require('./sprites/hand');\n\n    hand.play();\n\n    var fff = require('./sprites/fff');\n\n    fff.play();\n\n    var torch = require('./sprites/torch');\n\n    torch.play();\n\n    var endProgress = require('./sprites/endProgress')\n    endProgress.gotoAndStop(stage.progress)\n    var bg = sprite.getIm({\n        img: R.background,\n        'position.set':[0,0],\n        'width':640,\n        'height':1004\n    });\n    var throwTorch = require('./actions/throwTorch')\n    throwTorch({\n        before:function(){\n            console.log('beforeTorch');\n            hand.gotoAndPlay(0);\n            torch.rf = 2\n        }\n    })\n    this.addChild(bg);\n    this.addChild(endProgress)\n    this.addChild(torch);\n    this.addChild(hand)\n    this.addChild(fff)\n    this.addChild(count)\n}\n\nstage.render = function() {\n    if(this.isEnd) {\n        return\n    }\n    if(stage.timer % 120 == 0) {\n        var r = parseInt(Math.random() * 7)\n        randomLovers[r](stage)\n        stage.lg ++\n    }\n    stage.timer ++\n    stage.children.forEach((function(child){\n        if(child.render){\n            child.render();\n        }\n    }));\n}\n\nmodule.exports = stage;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/stage.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\n\nvar localResource = {\n  torch:'/assets/fires/fires.json',\n  flyingTorch:'/assets/fires/flying_fire.png',\n  landFire: '/assets/fires/land_fire.png',\n  hands: '/assets/hands/hands.json',\n  fff: '/assets/fff/fff.json',\n  fffStart: '/assets/fff/fff_start.json',\n  lovers: '/assets/lovers.png',\n  loversframe: '/assets/loversframe.json',\n  background: '/assets/background/background.jpg',\n  startBackground:'/assets/background/start_background.png',\n  drool:'/assets/drool/drool.json',\n  startButton: '/assets/start_button.png',\n  endProgress: '/assets/endProgress/end_progress.json',\n  backButton: '/assets/back_button.png',\n  endMask: '/assets/background/end_mask.png'\n};\n\nvar cdn1Resource = {\n  torch:'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/fires/fires.json',\n  flyingTorch:'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/fires/flying_fire.png',\n  landFire: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/fires/land_fire.png',\n  hands: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/hands/hands.json',\n  fff: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/fff/fff.json',\n  fffStart: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/fff/fff_start.json',\n  lovers: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511102127/lovers.png',\n  loversframe: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511102127/loversframe.json',\n  background: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/background/background.jpg',\n  startBackground:'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/background/start_background.png',\n  drool:'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/drool/drool.json',\n  startButton: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511102127/start_button.png',\n  endProgress: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511101612/endProgress/end_progress.json',\n  backButton: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511102327/back_button.png',\n  endMask: 'http://7tszl1.com1.z0.glb.clouddn.com/Users/zyg/Documents/burnlovers/uploadDir/1511102331/end_mask.png',\n};\n\nvar resourceMap = {\n  local:localResource,\n  cdn1:cdn1Resource\n};\n\nmodule.exports = resourceMap['local'];//resourceMap[resourcePosition] || resourceMap['local'];\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/resource.js\n ** module id = 4\n ** module chunks = 0\n **/","var sprite = require('./sprite');\nvar spriteTool = require('./spriteTools')\nvar R = require('../resource')\nvar config = require('../config')\nvar stage = require('../stage')\n\n\nvar droolBuild = require('./drool');\n\nvar loverBuilder = function(type ,cb) {\n    var cf = config.lovers[type]\n    var lovers = sprite.getMc({\n        maxFrame: 6,\n        preFix: 'lovers',\n        'position.set': [cf.x, 480],\n        'animationSpeed': 0.2,\n        'anchor.set': [0.5, 0.5],\n        'scale.x': 0.5,\n        'scale.y': 0.5\n    })\n\n    lovers.shootDistance = 210 + 150 * Math.random()\n\n    lovers.direction = spriteTool.makeIdentity(cf.direction)\n    lovers.speed = 10 + stage.lg * 0.1\n    console.log(lovers.speed)\n\n    lovers.dscale = 0.5 * lovers.speed / 5000\n\n    lovers.move = function(dt) {\n        this.scale.x += lovers.dscale\n        this.scale.y += lovers.dscale\n        this.x = this.x + this.direction[0] * this.speed * dt\n        this.y = this.y + this.direction[1] * this.speed * dt\n    };\n\n    lovers.checkout = function() {\n        if(!this.drooled && lovers.y > (1004 - lovers.shootDistance)){\n            console.log('吐口水啦');\n\n            this.drooled = true;\n\n            var drool = droolBuild({\n                x:lovers.x,\n                y:lovers.y\n            });\n\n            this.parent.addChild(drool,2);\n\n        }\n\n        if(lovers.y > (1004 - 70)) {\n            var stage = this.parent;\n            stage.removeChild(lovers)\n            stage.loversArr.splice(stage.loversArr.indexOf(lovers), 1)\n            lovers.destroy()\n        }\n    }\n\n    lovers.render = function(){\n        this.move(0.1);\n        this.checkout()\n    }\n    return lovers\n}\n\nmodule.exports = loverBuilder\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/lovers.js\n ** module id = 5\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar makeIdentity = function(a) {\n    if(a[0] == 0 && a[1] == 0) {\n        return [0, 0]\n    }\n    var b = Math.pow((Math.pow(a[0], 2) + Math.pow(a[1], 2)), 0.5);\n    return [a[0] / b , a[1] / b]\n};\n\nvar distance = function(x1, y1, x2, y2) {\n    return Math.pow((Math.pow((x2 - x1), 2) + Math.pow((y2 - y1), 2)), 0.5);\n}\n\nvar extend = function(){\n    arguments = [].slice.call(arguments);\n    var l = arguments.length;\n    if(arguments.length>1){\n        var from = arguments[l-1],\n          target = arguments[l-2];\n\n        for(var k in from){\n            target[k] = from[k];\n        }\n        arguments.pop();\n\n        return extend.apply(null,arguments);\n    }else{\n        return arguments[0];\n    }\n};\n\nmodule.exports = {\n    makeIdentity:makeIdentity,\n    distance: distance,\n    extend:extend\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/spriteTools.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/8/15.\n */\n\nmodule.exports = {\n    lovers: require('./lovers')()\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/config/index.js\n ** module id = 7\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/8/15.\n */\n\nvar config = {\n    0:{\n        x: 280,\n        direction:[-2, 5]\n    },\n    1: {\n        x: 325,\n        direction:[0, 5]\n    },\n    2: {\n        x:370,\n        direction:[2, 5]\n    }\n}\n\nmodule.exports = function() {\n    return config\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/config/lovers.js\n ** module id = 8\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/8.\n */\nvar sprite = require('./sprite');\nvar stage = require('../stage')\nvar spriteTools = require('./spriteTools');\nvar endProgress = require('./endProgress')\n\nvar droolBuild = function(config){\n    if(!config){\n        config = {\n            x:320,\n            y:320\n        }\n    }\n\n    var drool = sprite.getMc(spriteTools.extend(config,{\n        maxFrame:2,\n        preFix:'drool',\n        'anchor.set':[0.5,0.5],\n        'scale.x':0.25,\n        'scale.y':0.25,\n        'loop':false\n    }));\n\n    drool.speed = 4;\n    drool.direction  =spriteTools.makeIdentity([85-config.x,940-config.y]);\n\n    //停留帧数\n    drool.keeyTimes = 60;\n\n    drool.fly = function(dt){\n        this.x = this.x + this.direction[0] * this.speed * dt\n        this.y = this.y + this.direction[1] * this.speed * dt\n\n    };\n\n    drool.hit = function(){\n        if(this.y >= 940){\n            return true;\n        }\n    }\n    drool.hited = function(){\n        if(this.keeyTimes > 0){\n            if(this.keeyTimes == 60) {\n                stage.progress ++\n                endProgress.gotoAndStop(stage.progress)\n                if(stage.progress == 10) {\n                    stage.showEndMask()\n                }\n            }\n            this.keeyTimes--;\n            this.scale.x = 0.5;\n            this.scale.y = 0.5;\n\n            this.gotoAndStop(1);\n\n        }else{\n            this.parent.removeChild(this);\n        }\n    }\n\n    drool.render = function(){\n        if(this.hit()){\n            this.hited();\n        }else{\n            this.fly(2);\n        }\n    };\n\n    return drool\n};\n\nmodule.exports = droolBuild;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/drool.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/10/15.\n */\n\nvar sprite = require('./sprite');\n\nvar endProgress = sprite.getMc({\n    maxFrame: 11,\n    preFix:'end_progress',\n    'position.set': [200, 990],\n    'anchor.set': [0, 1],\n    'loop':false,\n    'scale.x': 1,\n    'scale.y': 1\n});\n\nmodule.exports = endProgress;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/endProgress.js\n ** module id = 10\n ** module chunks = 0\n **/","var stage = require('../stage');\nvar htmlTitle = document.querySelector('title');\nvar text = new PIXI.Text('已经烧死 ' + stage.burnCount + ' 对',{font : '24px Arial', fill : 0xffffff, align : 'center'});\n\nfunction changeTitle (count) {\n    var p\n    if (count > 200 * 0.99) {\n        p =  99 + '%'\n    } else {\n        p = count / 200 * 100 + '%'\n    }\n    var title = '我成功烧掉' + count + '对情侣,击败了' + p + '的单身狗';\n    htmlTitle.innerText = title;\n}\n\ntext.x = 400\ntext.y = 60\ntext.render = function() {\n    this.text = '已经烧死 ' + stage.burnCount + ' 对'\n\n    changeTitle(stage.burnCount);\n}\n\nmodule.exports = function() {\n    return text\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/count.js\n ** module id = 11\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprite');\n\nvar hand = sprite.getMc({\n    maxFrame: 3,\n    preFix:'hand',\n    'position.set': [130, 1004],\n    'anchor.set': [0, 1],\n    'animationSpeed': 0.3,\n    'loop':false,\n    'scale.x': 0.3,\n    'scale.y': 0.3\n});\n\nmodule.exports = hand;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/hand.js\n ** module id = 12\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprite');\n\nvar fff = sprite.getMc({\n    maxFrame: 2,\n    preFix: 'fff',\n    'position.set': [0, 1010],\n    'anchor.set': [0,1],\n    'animationSpeed': 0.05,\n    'scale.x': 0.5,\n    'scale.y': 0.5\n});\n\nmodule.exports = fff;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/fff.js\n ** module id = 13\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprite');\n\nvar torch = sprite.getMc({\n    maxFrame: 4,\n    preFix: 'fire',\n    'position.set': [135,960],\n    'anchor.set': [0,1],\n    'animationSpeed': 0.5,\n    'scale.x': 0.3,\n    'scale.y': 0.3\n});\n\ntorch.rf = 0\n\ntorch.tf = function() {\n\n    if(this.rf <= 0) {\n        this.x = 135, this.y = 960\n        this.rotation = 0\n    } else {\n        if (this.rf <= 1) {\n            this.x = 110, this.y = 980\n            this.rotation = -0.5\n        } else if (this.rf <= 2) {\n            this.x = 135, this.y = 960\n        }\n        this.rf -= 0.3\n    }\n};\n\ntorch.render = function() {\n    torch.tf()\n};\n\nmodule.exports = torch;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/torch.js\n ** module id = 14\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar stage = require('../stage')\nvar flyingTorchBuild = require('../sprites/flyingTorch');\nvar landFireBuilder = require('../sprites/landFire.js')\n\nvar defaultConfig = {\n  before: [],\n  after: [],\n  progress: []\n};\n\nvar checkShoot = function (x, y) {\n  var i = 0,\n    loversArr = stage.loversArr;\n\n  while (i < loversArr.length) {\n    var lovers = loversArr[i];\n    if (Math.abs(lovers.x - x) < 40 && Math.abs(lovers.y - y) < 40) {\n      loversArr.splice(i, 1);\n      stage.removeChild(lovers)\n      stage.burnCount ++\n    } else {\n      i++;\n    }\n  }\n\n  stage.loversArr = loversArr;\n};\n//等于true，使之能够监听事件\nstage.interactive = true;\nstage.on('touchstart', function (e) {\n  //before\n  defaultConfig.before.forEach(function (fn) {\n    fn()\n  });\n  var x = e.data.global.x;\n  var y = e.data.global.y;\n\n  var flyingTorch = flyingTorchBuild({\n    tarx: x,\n    tary: y,\n    arrived: function (torch) {\n      console.log('目标x:' + torch.tarx + ' 实际到达x：' + torch.x + '目标y:' + torch.y + ' 实际到达y：' + torch.tary);\n      checkShoot(torch.x, torch.y)\n      var landFire = landFireBuilder()\n      landFire.x = torch.x\n      landFire.y = torch.y + torch.height / 3\n      landFire.scale.x = torch.scale.x + 0.1\n      landFire.scale.y = torch.scale.y + 0.1\n      stage.addChild(landFire)\n    }\n  });\n\n  //console.log(+x,+y);\n  //console.log(flyingTorch.direction);\n\n  stage.addChild(flyingTorch);\n\n  //after\n  defaultConfig.after.forEach(function (fn) {\n    fn()\n  });\n});\n\nmodule.exports = function (throwLifeCb) {\n  //记录插入的坐标\n  var indexes = {};\n\n  for (var period in defaultConfig) {\n    var cb = throwLifeCb[period];\n    if (cb) {\n      indexes[period] = defaultConfig[period].push(cb) - 1;\n    }\n  }\n  //remove\n  return function () {\n    for (var recordPeriod in indexes) {\n      defaultConfig[recordPeriod].splice(indexes[recordPeriod], 1);\n    }\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/actions/throwTorch.js\n ** module id = 15\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprite');\nvar R = require('../resource');\nvar spriteTools = require('./spriteTools');\n\n\nvar setGravity = function (flyingTorch) {\n    var distance = spriteTools.distance(flyingTorch.x, flyingTorch.y, flyingTorch.tarx, flyingTorch.tary)\n    var times = parseInt(distance / flyingTorch.speed);\n\n    flyingTorch.g = 0.04\n    flyingTorch.vup =  - flyingTorch.g * times / 2\n};\n\nvar setConfig = function(flyingTorch){\n    //flyingTorch.vup = 5\n    flyingTorch.x = 160;\n    flyingTorch.y = 870;\n    flyingTorch.direction = spriteTools.makeIdentity([parseInt(flyingTorch.tarx-160),parseInt(flyingTorch.tary-870)]);\n    flyingTorch.speed = 2;\n\n    setGravity(flyingTorch);\n\n    flyingTorch.fly = function(dt){\n        this.scale.x -= (0.001 * dt * Math.abs(this.direction[1]))\n        this.scale.y -= (0.001 * dt * Math.abs(this.direction[1]))\n\n        this.x = this.x + this.direction[0] * this.speed * dt\n        this.y = this.y + this.direction[1] * this.speed * dt\n        this.y = this.y + this.vup * dt\n        this.vup = this.vup + this.g * dt\n    };\n\n\n    flyingTorch.render = function(){\n        if(this.x < 0 || this.x > 640 ||\n                (this.direction[0] < 0 && (this.x < this.tarx)) ||\n                (this.direction[0] >= 0 && (this.x >= this.tarx))) {\n            this.arrived && this.arrived(this);\n            this.parent.removeChild(this)\n        }else{\n            this.fly(2);\n        }\n    };\n\n    return flyingTorch;\n};\n\nmodule.exports = function(config){\n    var flyingTorch = sprite.getIm(spriteTools.extend({\n        img: R.flyingTorch,\n        'scale.x':0.3,\n        'scale.y':0.3,\n        'anchor.set':[0.5,0.5]\n    },config));\n\n    return setConfig(flyingTorch);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/flyingTorch.js\n ** module id = 16\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/8/15.\n */\n\nvar sprite = require('./sprite')\nvar R = require('../resource')\nvar spriteTools = require('./spriteTools')\n\nvar landFireBuilder = function() {\n    var landFire = sprite.getIm(spriteTools.extend({\n        img: R.landFire,\n        'scale.x': 0.3,\n        'scale.y': 0.3,\n        'anchor.set': [0.5, 0.5]\n    }));\n\n    landFire.restTime = 50\n\n    landFire.render = function() {\n        if(this.restTime <= 0) {\n            this.parent.removeChild(this)\n            this.destroy()\n        } else {\n            landFire.restTime --\n        }\n    }\n    return landFire\n}\n\nmodule.exports = landFireBuilder;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/landFire.js\n ** module id = 17\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/9/15.\n */\n\nvar sprite = require('./sprites/sprite')\nvar R = require('./resource')\n\nvar stage = new PIXI.Container();\n\nstage.clear = function () {\n    stage.removeChildren()\n    stage.parent.removeChild(stage)\n    this.visible = false\n}\n\nstage.init = function() {\n    this.visible = true\n    var bg = sprite.getIm({\n        img: R.startBackground,\n        'position.set':[0,0],\n        'width':640,\n        'height':1004\n    });\n    var fffStart = require('./sprites/fffStart')\n    fffStart.play()\n    var torch = require('./sprites/startTorch');\n    torch.play();\n    var startButton = sprite.getIm({\n        img: R.startButton,\n        'position.set':[20,700]\n    });\n    startButton.interactive = true;\n    startButton.on('touchstart', function () {\n        stage.start()\n    });\n    this.addChild(bg)\n    this.addChild(torch)\n    this.addChild(fffStart)\n    this.addChild(startButton)\n}\n\nstage.render = function() {\n    stage.children.forEach((function(child){\n        if(child.render){\n            child.render();\n        }\n    }));\n}\n\nmodule.exports = stage\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/startStage.js\n ** module id = 18\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/9/15.\n */\n\nvar sprite = require('./sprite');\n\nvar fffStart = sprite.getMc({\n    maxFrame: 2,\n    preFix: 'fff_start',\n    'position.set': [320, 800],\n    'anchor.set': [0.5,1],\n    'animationSpeed': 0.05,\n    'scale.x': 1,\n    'scale.y': 1\n});\n\nmodule.exports = fffStart;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/fffStart.js\n ** module id = 19\n ** module chunks = 0\n **/","/**\n * Created by guoshencheng on 11/9/15.\n */\n/**\n * Created by zyg on 15/11/7.\n */\nvar sprite = require('./sprite');\n\nvar torch = sprite.getMc({\n    maxFrame: 4,\n    preFix: 'fire',\n    'position.set': [440,520],\n    'anchor.set': [0,1],\n    'animationSpeed': 0.5,\n    'scale.x': 0.4,\n    'scale.y': 0.4\n});\n\nmodule.exports = torch;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/sprites/startTorch.js\n ** module id = 20\n ** module chunks = 0\n **/","/**\n * Created by zyg on 15/11/7.\n */\n\nvar r = require('./resource');\n\nmodule.exports = function (cb) {\n\n    var loader = PIXI.loader; // pixi exposes a premade instance for you to use.\n\n    for (var k in r) {\n        loader.add(k, r[k]);\n    }\n\n    loader.on('progress', function (a, b) {\n        //console.log.apply(console, arguments);\n    });\n\n    loader.once('complete', cb);\n\n    loader.load();\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/loader.js\n ** module id = 21\n ** module chunks = 0\n **/"],"sourceRoot":""}